@import B

@export main fun -> u32
    // Substring
    substring blob<@B.String> <- @B.String("Substring")
    substring.println.val({substring.adr})

    greeting blob<@B.String> <- @B.String("Hello, World!")
    greeting.println.val({greeting.adr})

    greetingLength blob<@B.String> <- @B.StringForUInt(greeting.length.val({greeting.adr}))
    greetingLength.println.val({greetingLength.adr})

    sub blob<@B.String> <- greeting.subString.val({greeting.adr}, 2, 10)
    sub.println.val({sub.adr})

    subLength blob<@B.String> <- @B.StringForUInt(sub.length.val({sub.adr}))
    subLength.println.val({subLength.adr})

    // Comparison
    comparison blob<@B.String> <- @B.String("\nComparison")
    comparison.println.val({comparison.adr})

    stringA blob<@B.String> <- @B.String("Apple")
    stringB blob<@B.String> <- @B.String("Banana and Apple")

    compA blob<@B.String> <- @B.StringForBool(stringA.isEqual.val({stringA.adr}, stringB))
    compA.println.val({compA.adr})

    stringB <- stringB.subStringFrom.val({stringB.adr}, 11)
    compB blob<@B.String> <- @B.StringForBool(stringA.isEqual.val({stringA.adr}, stringB))
    compB.println.val({compB.adr})

    // Find
    find blob<@B.String> <- @B.String("\nFind")
    find.println.val({find.adr})

    longer blob<@B.String> <- @B.String("This is a longer string with a dog")
    shorterA blob<@B.String> <- @B.String("cat")
    shorterB blob<@B.String> <- @B.String("long")
    shorterC blob<@B.String> <- @B.String("dog")

    findResA blob<@B.String> <- @B.StringForUInt(longer.find.val({longer.adr}, shorterA))
    findResA.println.val({findResA.adr})

    findResB blob<@B.String> <- @B.StringForUInt(longer.find.val({longer.adr}, shorterB))
    findResB.println.val({findResB.adr})


    findResC blob<@B.String> <- @B.StringForUInt(longer.find.val({longer.adr}, shorterC))
    findResC.println.val({findResC.adr})

    ret 0
;
