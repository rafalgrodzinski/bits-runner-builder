
@extern putchar fun: character u64 -> u32

@export print fun: text data<u64, 64> -> u64
    rep i u64 <- 0, i < text.count and text[i] != 0, i <- i + 1
        putchar(text[i])
    ;
;

@export printNum fun: number u64
    biggest u64 <- 10
    rep biggest <= number: biggest <- biggest * 10
    biggest <- biggest / 10

    rep biggest > 0, biggest <- biggest / 10
        digit u64 <- number / biggest
        putchar(digit + '0')
        number <- number % biggest
    ;
;

add fun: a u64, b u64 -> u64
    ret a * b
;

@export main fun
    pAdd ptr<fun u64, u64 -> u64> <- { add.adr }
    printNum(pAdd.val(4, 5))
    //r u64 <- pAdd.val(4, 5)
;